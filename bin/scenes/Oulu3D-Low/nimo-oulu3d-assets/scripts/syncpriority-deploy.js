// Copyright Adminotech Ltd. www.adminotech.com

// !ref: http://adminotech.data.s3.amazonaws.com/tundra2/app/lib/class.js, Script
// !ref: http://adminotech.data.s3.amazonaws.com/tundra2/app/lib/admino-utils-common-deploy.js, Script
// !ref: http://adminotech.data.s3.amazonaws.com/tundra2/images/icon-syncprio-ents.png, Binary

eval((function(x){var d="";var p=0;while(p<x.length){if(x.charAt(p)!="`")d+=x.charAt(p++);else{var l=x.charCodeAt(p+3)-28;if(l>4)d+=d.substr(d.length-x.charCodeAt(p+1)*96-x.charCodeAt(p+2)+3104-l,l);else d+="`";p+=4}}return d})("engine.IncludeFile(\"http://adminotech.data.s3.amazonaws.com/tundra2/app/lib/class.js\");` +h` K\"-utils-common-deploy` ~*mportExtension(\"qt.core\");if (IsClient()) {` 87gui\");}SetLogChannelName(\"SyncPrio\");var MSG_SYNCPRIO_PENDING_REQUEST = ` F%PendingEntitiesRequest\"` R.COMPLETED` R(SyncCompleted` K&CLIENT_AUTHENTICA` P#LockSession`\"I\"Authentica` S)AVATAR_MESH_CRE` W$AvatarMeshCre` H&_p = null` (\"appEntName` O!`$:!`\"t%` =\"lock`\"M!y` 9*`!U'Application` N#dynamic` D*PriorityData` A#a`!a!Bas` A\"` )!` 4#moveFrom` /\" = new float3(0, 0, -3`$Y\"_c`\"{!CacheRate = 5` 2#utoffSq = 500`!T#ebugging = true` C#ache = {loadStats:{}, meshVolume` *\"position` (\"clear`!2!Interval:120, tClear:0` ;#Pos` 6&5, tPos:0, get`!$\"function (entID) {return this.`!I%[` 9!];}` V!M`!R%` A;`!y'` T*P`\"&#` A;`\"K%` S'`\"3!` M') {`!^* = {};`!0,` +'`\"~\" = 0` g%`!H$`\"e(` q$`!<%` W(Pos` Y$updat`\"^(frametime` Z$`!*#+= ` 2%`+I!` 1(>`\"L\"`$f.` ]$` 5!()`!q.`!G&` j3Pos` r)`%J'` p)`\"\\%` }%`\"=%}}`''!`+G%erver = C`/(!extend({init`#3*if (me.name !=`*I() {` 1$` +)`\")#data`#e'`/_!usingAuth = false` 1'cleanup`,I\"s = []` 1)ient` `,rul`%K)` +&.p`+)#Na`%u\"` a)` =\"constainsText` *5` =!NoAut`,x!` 22acceptSkyX`*q$` ,2Hydrax` &:Partic`\"3\"` 8+ti`#h!`\"B)time.e`.?!Releas`&O% = 0.5` &AMultipli`%N!0` C,script` l.7` v$initDataCompon`3Y!` 3\"refreshFrom` +1checkAuthState();`'y!.U`)L!d.connect`(!!,`'z\"on` 7\");syncmanager.Scene` _!`1j#` E2` 6-);s`($!.UserDis` O#` H4`&w\"` <();me.A`(J!(`4Y)PENDING_REQUEST).Trigger` c4Pending`3(!iesRequest` o,`4=/` Y=`2^\"`\"H%}, shutDow`/0(`+?$`)l&`#|*d`\"K%`#w2`0/\"`\"z\"` l'connId`+@#typeof ` .\" == \"number\"`0E+`*F'[` G\"];} else ` Q2string` K8par`'5!`!I$` h%{LogError(\"Cannot get `+g#for param of type: \" +` %!`!7&+ \" valu` 6#` z#;}}, `(&-`#c*var d` 8# = me.Get`(9&\"EC_Dynamic` ,%\", _d` .\"`.^!`0?!` Z&= null) {` f-O`%:#` PK}if (!` f$.C`-H#Attribute(\"Important`'5!`.I\"\")`!8'.`!3\"` H'qvariantlist\", ` L3;` X%Set` q<, [\"Admino`'h\"M`*r\"\"]`!LS` >$`!H^` `&`!'?`0}&` j]` M:`!)?`/h#Rate` |;real\", ` D*`$G4` 9(`+?#`1=;`!I@DrawDebug`!L;boo`!f!` E'`!Q4` 9&, false`*.\"`1z4`)~9Ge`2n-`)l)!`)p%` +(.G`'W>)` Q'`#C&rules.prior` B$ = StripEmptyS`-l!s` \\J`$!#` *F`&E&`!J7cons` A!Text`!&[`(@'`!O9`'~:`!O:` @!` W&`!FH`);`!V9`(o)`!W'var r` 2& =`&N%` E8`&Y!`2 #` Q)`4')if (` 2(< 0.01`3a!`!%(0.01`*(B` Z!;Log(\"Reseted`!6$ rate to` >!, was too low.\");}`*c@ =`!(;` /@Multiplier =`+fA / 4`#6\"` PJ`#1%`!%M`#X!}}}}}, checkAuthState`+c*`!G*usingAuth`$H!turn;}var lockToolEnt = scene.Ge`([#B`&l!(_lock`&w&`%f\"` M(`(+0`!(% = true;` F'.A`!b!(MSG_CLIENT_AUTHENTICATED).Triggered.connect`\"&!`07#onClient`\"*!`%w\"Found`\"(! tool, authentica`\"l!is enabled`%y!}, ` Y(`#.'connIdStr, answer) {try`(q\"` 7\" = par`$9!` E&);` <!` n!Data`%r)` 1\"[` G\"]`#:!` ?'`#*0` D*.`\"#'ed =`!T#`)X!allow\" ?`#`! :`1S\";}} catch (e) {LogError(\"Excep`\"E!while handling`#+! `&W\" a`\"f\"fo`\")$ \" +`\"V#Str + \" with response '\" +`!M$+ \"'\"`$2!`!.\"e.to`-A\"()`#m*Dis`$w#ed`#r-,`!,!Ptr`':-`\"n*`\"{@shutDown(`+,)` Y+` a\";_cache.clear()` \")Positions();`\"\"!Pending`(6!iesRequest`\" 'strC` z!`.q#`%o.` 8&`%|!sync`*'! =` '!manager.Scene` 4!`\"x#`)?\"` E&`\"_# &&` Z&.Has`!T+()`%I\"(\"S` 3\" p` ;\"`%6\"ies to`%$.`%.!`%E'r`\"D\"\"`!o\"nonSyncedIds`!q#`!:\"`!1(yIDs(`)g#-- Inspecting`!\"!` W(.length`!/!`!N$\");for (var i = 0; i <` C0; i++`#h#ent`#i!` ;([i]`!p!e`,}0(` M!`#V\"` <!`&3%LogWarnin`!y\"Could not find`!`#ty`\"!id`\".!` d#`\"d&Mark`\"e)Dir`!)&} else`'f\"!`' !hasNoAutoSync(ent)) {` FE}}`'u]endSyncCompleted()`39'`(!~`+%\"`'p&Crea`*x.Ptr,`$a\"` @!`\")$refreshFromDataComponent`!|$`3,*`!7+`!:7`\"'1Ptr.i`\":\"ew `,w\"C`,t\"ionData`1x#` C&);`!j&.AboutTo`$\\!`$f\"`2A2` 6.`,$!`%\\)`\"t'ent`-v#`';-`0(#`&5*) called`/W\"`+J!`! \"!\");return`0w$` n#.name` r$ || ` ((\"\") {` E.`#8&rules.contain`!>'`*Y$> 0`)&NameLo`2Q!` }%.to` .!Case(`*l2` eE`+,(cond`%-!`4Y)` I4[i]`!:+`\"w#`!j%.indexOf(` p%) != -1`\"w&true;}}}`#\"*`$w!Priority`$^8me` [,`#W0acceptSkyX &&`#A!skyx`*a'` ;CHydrax` \\$h` (\"` 5MParticles` a$p` )$ystem` Y4`%E'`%@'`#h(.substring(0, _avatarBase`%$#) ==` +(`!_0` y%= _lock`(#\"Na`#W.`&2@p`$\\#Name`1_&++i`$_#` 39[i] =`\"E!`!+0`\"d(`'xDk`!d\"k`(*2s`'[!Text`!_'k`'uB` R&[k`'Lf`(%,`-60`0+(hangeRequest`!p$`.p!`!m$get`/ \"` >*`.N$ionID`!k\"` Q#`&b&` +\"`.X1` _*`//#`\"{!time`2)$Update`!d'frame` =!`%G\"_debugging) {profiler.BeginBlock(\"SyncPrio_` f\"\")`(w,cleanup`\">\"`&I$`.)#`'&&Clean`'.#` &\"`%D(` O1` B$`-a&` @\"Id`%C)` N*[` N\"];Log(\"Doing completed` Z$ fo`$=%\" +` o&`$\"\"`3f.` 8$]`$2'` +7.shutDown`4P1` c&` f\";}}`!v4 = [];_cache` 6!r()` \")Pos`'I!s()`,H\"` \"Ptrs = server.AuthenticatedUsers`(;#` C&`$I*` {#u`%-!`%i'`2A1` T-`21)`'~)`\"Y*` O$[i].id]`'f9`!;,`']0`&s!`';2End`'I\"`(1$A`.l!Created`*#(onnIdStr`)k<` ?%`!Z9`/r\"`! # =`3q%);var ` f\"C`*_%Cache = Class.extend({init`!T*troller, itera`+=!nterval`*/#` '- =`!T\" ||` C. < 1.1) {` D/ 1.1;`&u& = {}`'M\"i` :&` G-` <\"t` '0 + 1` 9\"nowClosestDist`($$` 6!ord`0w!{re` &!:true, lists:{}, impOrdered:[], dist` &&};}, `):$`#/'`)h(`!'$`*F%`!-\"`*/+` 0!.`!2!`!N..`!;&` */`!H'`*>%`\"/)` G&`\"S2`!!ould`/3-`1h'`#a\">` #\"`$)%?`&C! :`1{&`(Y\"`%y)mparePos, e`0l!IDs, noAutoSyncIDs`&&#!` x!`!@(()`!:%`0'\"`0;G`'m#ache`0g'`%g%0`-f&`&A'`#M\"`%F#`(_$`+x0`\"\"%`,\"%++i`*$#id =` 7&[i]`)?!`*8\"scene.Get`3V#i`0##` 9!`*+&ontinue`(&'[i`/B!{importance:null`&m\"` &%}`!&!`#S& =`$4#`!z&As`!#As <`#z*`.-&As`.4!if (` 5)[iAs] == id) {` {)`#&!break;`-[\"` 4&`\"%)var p`\"{\".placeable`!r!m` /#mesh` ,!r` *#rigidbody`#&!p`+X(m`#+'`\")`(3!ance = 1;`!5&` \\\"`)5&`\"o!terPos = `1I#get`2H$`$9%` <%` R%` M&p.World` K%`32%p`3.$`$X#` L#`$i+`!`(` ;#.D` ,#Sq`(X')`!q+ && `+C% && m`\"/'`+i%`*H+` D'`!/3-` 3\"` I+< _cutoffSq`#1#meshVolume`#.)M` .%`#4%` >(`!X%` R)r.ShapeAABB().SurfaceArea`#C&` F&`#G$` (&`#B,`(=&` :) /`\"=3;}`'/\"`+K2End`+Y\");}}`09\"NumSortAscending`-('a, b`-q&a - b;` H*De` 6=b - a;}, getNex`4-(`$p(`,D)` 2#`-.SR` _\"`-]%`1)/[]`1 6` .*`2&!.imp`.,-` 4\"d`1;\"{}`,/'d i`1##data`0()data.hasOwnProper`-u\"`+L)`\"k%`-e&`-~/`!%!`%Q(`%`4`*O\"` @&`4=1`\"t&.push` E'`'r\"`\"^0[` ;&`!W(` )> []`$.)` 21`!A#d)`\"E\"`+O'`'b3if (` =%`\"01`$}'` x\"` G$`\"-3dist[` <$`\"&9` :,`\",2` 8*`\"6'`&r2.sort`!P\"`(~1)`'-3` B2`*8%` J)`)*#`3V%`*tC`)#WG`*a\"\"`$q#nextID `#U\"`#w,`\"a'length > 0`2D$mpFir`)8!` =1[0];` t%`&54` ]!].shift(`'L:` D#`!A#==`!D!`$A3` h#}} else ` h+`$?(`\"&-dist`\"%/` I'`!{:`&;%`!w@` =,`\"$5`&1)`\"6$`3H0=`!w&`,c\"`%k>`0A#`\"-\";}});var `%l#onne`0I!Data = Class.extend({ini`0d(controller, connID`!~$` 0& = ` #&`($\"` E\"` 3\"nID` .#ache = new`!;-`'D!`#I!, _c`'R&Rate`(w#scripts` Z#Array` 3\"priorityParen` -0authenticat`1J!`!q+`0\\\"usingAu`$G!= true ?`)|\" :` *!` e#vatarCre` e#`*>\"`$Q#AutoSyncIDs`2K'notifiedComple` F-chokeInterval`!F4time.entityReleas` I%` Z'Tot` ]!0` .\"t =` \"%LastS`#<!` 0!}, shutDown`%\"'`3P#`$B'`/e+` 0!.` R$`'(%`$p%ul`!G$`%Q(` *)`%Q\"` )&`$k'` +%`$^/` 3%`#U,` 5!}, onAboutToDirtyE`#%!`'<(hangeRequest, timeData`*{#ent = ` 7)`#f#`*;&`$''hasN`!>%(ent)` ^&`\":!ent.id`)0!alreadyMark`%.'for (`.N!As`$,!` $!<`%6\"`\"6)`+:#` <!++`$6(` :)[iAs`3J!`!>!) {`!(,`'=!break`1%#!` 5)`$z$`!.*`3J!` l\";}`\"q*Reject();`+f\"`,4\"`\"v/P`$e#`\"$if (ent.placeabl`&8(var p`%/!Ref`#@#` ?%.` 1%.ref`$3!` B&` ]# &&` V'!= \"\"`\"1$`&%+`\"5\"par`(d!` `&));}`-x#;`0{,` S,`0|)`$i%pi`$k\"pi`$h$` B2; pi`$c*` 9+[pi`$j$.id) {`!O$`$Z\"ent`,&#`#7'`!h.ent`(}#`)},`)3#`$|%.id`$l6}, sendSync`,^%`+(.!`,z2`&3&`-7.`&s!var `/n#onnPtr = server.GetUser`0@&`&<%nID`3~\"` L*`\"<&Log(\"Notifying`1,# with id \" +`.B%nID + \" of sync c`![\"ion!\");` s).Exec(me, MSG_SYNCPRIO_COMPLETED);}}}, update`\"w'frametime`+p)`#+&`1W)`$_'` 7'`1.(` 7'`/e#+= ` {%`3e'` %1`0#(` 1)`&c%t`'5$`1Q)`!$.= 0`$Y!syncState =` '!manager.Scene` 4!`$F.!` L%.HasPending`/5!ies(`+%$`%u;`&e-()`13,`3<\"cleanup`%@\"`'o#`!F)`*N%if (_debugging) {profiler.BeginBlock(\"SyncPrio_` l\"_U`%-!\");}`/~(`1Z!`#M%`)+$`+0& &&`#b\"`$'(>=`%[%` L#Relea`,F!`$ $` y$` k)shif`)i!`*Z\"`4_+.should`!c\"`#[!`1\\!`&2!E`2]!scene.Get`3:\"ByName(_` =\"Base`(F*`$a\"` V'`._#||` l&`/^'` 8#`)T\"Error(\"`)N##`):0`,w#is` R!`+{\"ing all p` %#`4A!ies!\");`&%&Mark`&!+Dirty`1d'var moveAmou`\"W!`!_/.WorldOrienta`+w!).Mul(_moveFromA` O!)`'}!inspectPos` Q8Posi` c#Add(`!8&` _\"`\"0#EntIDs`(d#`\"-\"`\"#(yIDs`'^%`$u!`+i\"(`!:&,` ]*,`#W\"noAutoSyncIDs);}`%x)` d\"getNex`& !`0X#ID`44+`!U\"GetOwnAndChildrenIDs` I\"` w2`2x%`2y#i < ID`2d&`2g\"`$J6y`$\\\"IDs[i]`(#`,8!Time `(G'`%N!y`(C+`0}\"hokeMultiplier` 4=` A&` Z!assetStat`\"X#Load` *!(`\"<!`!C&+=` A'.mesh *`!-,` 56aterial` (Gtexture` 'Gwebviews` @/`/d. =`#_&` 4'Total +` 1(`+q#`%o&`*j$`,~$`-2+<= 0`+$llAreN`%k% = true`#t!nonSyncedId`'t=Log(\"I`(\"\"ing \" +` S)`!3$+ \" ents, looking for 'noautosync'\"`&~2` Z/`'5$`!f\"SyncEntId =` @)[i]`\"'#` :$`!`\"`.F.(` Z'`.>\"` B.`)I%`(1=` `)`0.(`3T\"`2}'has`#w&`!#-)`2e!int(\"-- No auto`$(! found:`#e#` H*.id`#g!` '1name);`%(/false;break;}}`,%!` 6,`0a\"`!G!All remain`0'( are`$d) objects,`!o\"is complete!\"`#a\"`\"l\"notifiedC` 7#d) {`'8\"endSync` 0%();}`#5,data.cleanup`28\"s.push`4\"#`32#`\".\"` .!tLastS`(4! >`,('`(F\"`,$+`!C$` I(= 0`/'\"_debugging`$F!ofiler.EndBlock();}}}`1\"\"SyncPrio`3x#= Class.extend({init:function (`!-$`20\"Na`.K!_` (\"Base + c` d!.GetConne` T!ID`1]$` E\"MeshCreated`$z%`#R\"`#H(` -*drawDebug` .%frame.U`2L!d`#K!ect`#E!`11#`2f\");me.A`!C!(MSG_SYNCPRIO_COMPLETED).Trigger` Q2`)t\"`%:&`#3!dataComp = m`)l!Component(\"EC_Dynami` P!` 0!\", _d` .\"N`'f!if (` [%`3O# &&` o%.GetAttribute(\"D`\"V$\")`3y'`\"h-` <>`%Z\"` K*`(Y$Draw `%u! lines enabled\"`$V#`1I$izingPos `!C\"` */E`/n\"` 9\"`,n\"`,#\"`%/#`#Q2` 6));}try`.%\"icon = new QIcon(`1|!`\"@!ssetCache().GetDiskSourceByRef(\"http://adminotech`)Q\"s3.amazonaws.com/tundra2/images/icon-syncprio-`)u\"ng\")`%7\"toggle`&.\"`!P$`&;#icon, \"Fetch p`.^\"`/P\" content\\n(Use with cau` _!in bi` A#s)\",`${\";` |(.t`&h8requestAll`/l(ies);browserplugin.Add`!c#` q(, \"A`\"y%\");} catch (e`%V\"Error(\"No ` g# ` i\", cannot add`+B% shortcut\");}}, shutDown`+:*}, `!\\5` <*me.Exec(2, `)s)PENDING_REQUEST,`+b5);}, sendA`+n,` l9AVATAR_MESH_CREATED` e;`*{+` p*`(~!`21!`1%$`(p%`-',true` j\"`(&)` e'`26!y, change)`4[(`*f&||`%W\"` r)) {return`*d\"` c\"`+v(` ,\".placeable`+`,`*/S`!#&` q&.IsAttached())`*F\"world` q\"` >-W` 5#i`'<!`-\"` H$.x != 0 &&` Z%.`\"3!` %*z` .!`!q7` B$`4-(` 5.`\"X7`\"N$`!w#id;}}}, `1G\"`$X'`1z!tim`$P*`2p-`3e*`3,*Get`'I&(`&a6`\" %` j0`3A\"DelayedExecute(1`2U;`(Y1`!#\"`&W+` y%`4A$dis`417}}} else `1U. && ` w\"`'A,var `\"5\"Ent =`.\"\".Get`(Y\"ByName`\"V(`3z&` N%` `#moveAmou` c!` 4%`&T,Orienta`&a\".Mul(_moveFrom`\"p\"`0B\"inspect`&3\"` T5`'G&.Add(`!8&)`34#ogre.`\"^!DrawLineSegment(new ` $(`!'&,` l@), 1, 0, 0,`+o!`%_'`'b-`*\\&` yX` g1`!5.`%4,`(n/`!F&`$R!` 2+`%3.` Q4`\"N\"` O-`-F'` ,,`-I.` (:`,g;` >7`,.~` rI`/C;}}}}}}});`,{%LogError(msg) {console.` .%\"[SyncPrio] \" + msg);}` V%GetDataComponent(`#6#d` .# = m`$}!` 8&\"EC_Dynami`*|!` 0!\", _d` .\"`*N&` Z&`%%Init`\"4!e`!'+;`3+\"` WR`'D#`3n#`!s%;}`\";)OwnAndChildrenIDs(entID, noAutoSyncIDs`\"Y#e`'K1` L!`\"7\"` <!`\"/%`#e&` t1) ` [\" with input ID`$+!` n! + \" does not exist!\"`\"l$;}var IDs = [ent.id]`!;$`(6.) {try`!\"childEnts`3%\"`&L'`!U$();for (` I!i = 0; ci <` Q&.length; ci++`\"v#`#'& = false` \\&iAs` a\"iAs <`#N*` c%iAs` h!if (` 5)[iAs] ==`!6&[ci].id) {`!))true;break;}}` Y*`( \"tinue;}IDs.push(` `-;}} catch (e`$U)Failed to iterate`!G\"ren\");}}`&>#IDs`(Y*LoadStat`&0#`&!$l` /$ = {mesh:0,`*h%:0, texture:0, webviews:0}`#F'`#H# <`%f\"`#;'`$(%`&s7s[i]`&~0`\"y&` Z#`!]$_cache.ge` ,\"`&A!id` Z%` @#` _%` O'`!sH`'8$mesh`'0'` +(` 7!Ref.ref != \"\"`!$'` 8!++`!x\"matJsList = new Array;` 3#Cpp` 4#` l)M`!]#`#c\"matKey in` G'`!H#` '&[` @\"]`1D+` +/`!f!`!M%`&[\"` 8.);}}`\"&&`!I# +`0K!` S#`%$#`']!`!z!` >$`!8'` ,(.`+W!Ma`3X!\"\"` .-out` 4(`#D)` =#++`#2$Parameter`+8$` ^%p` 1%`&~&p`'\"#pi <` P*`'(%p`'(&lineLower`2y\"` C&[pi].to` 7!Case`4,#` G%.indexOf(\"`&3# =\") != -1 ||` n&` 7-` >%`\"I(` 5#++;}`+A\"ent.`'!#`#T,` 0#.enabled =`, \"` /,` @#Ur`$@!`#V*`'z$++`$i&slidesho` -` 0%`!\",`/W(texRef`$9#` H&` $\"`0I!` +&currentSlideIndex`0a\"` \\#`!3'` (&`!q*`#\"(`-p(}}`+.#`-$%`1`$`!S\"` .!;}` 5%`*P\"+` 2&` ,!;` 5'`(\"'`&p-` ='`%;$` ;(` -#` ;'`#n$` :)` -$;`/I$` G%`/I*AvatarMesh(connID`':#a` 3!E`.E0ByName(_` =\"Base + ` V#`#m!` R&`#j'` ,%`-D,`!Y#` 2*.Has`!P!)`!x%`4#\"`!s&StripEmptyStrings(s` #!`,u#var stripped`-k-`1*0` T&`13+if ` p'[i`-T)` (-`&.!`!-(`-Y\"` ;)`3]'` >(`\"2'OnScriptDestroyed(`!B#_p) {_p.shutDown();_p `!J\";}}` '!IsServer() ?`\"P!SyncPrio` 1\" :` ()Client;"))